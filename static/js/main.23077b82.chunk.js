(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){e.exports=n(199)},111:function(e,t,n){},199:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(16),c=n.n(r),m=(n(111),n(30)),i=n(31),s=n(11),l=n.n(s),u={photos:0,comments:0,rsvp:0},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=Object(a.useState)(),o=Object(i.a)(n,2),r=o[0],c=o[1],m=Object(a.useState)([]),s=Object(i.a)(m,2),_=s[0],g=s[1];Object(a.useEffect)(function(){g(function(e){var n=l.a.compact(e.concat(r));return n.length>t?n.slice(1):n})},[r]);return Object(a.useEffect)(function(){window.__sockets__[e].onopen=function(){return console.log("".concat(e," socket open"))},window.__sockets__[e].onclose=function(t,n){return console.log("".concat(e," socket closed: ").concat(JSON.stringify(t)))},window.__sockets__[e].addEventListener("message",function(t){return c({message:JSON.parse(t.data),id:u[e]++})})},[]),{messageList:_}},g=n(105),h=function(e){var t=e.messageList,n=e.RenderComponent,r=e.rowHeight,c=e.containerHeight,i=e.containerWidth,s=e.getListRef,u=Object(g.a)(e,["messageList","RenderComponent","rowHeight","containerHeight","containerWidth","getListRef"]),_=Object(a.useRef)(!0),h=Object(a.useRef)(),p=Object(a.useRef)(l.a.takeRight(t));Object(a.useEffect)(function(){p.current=l.a.takeRight(t)},[t]);var d={rowHeight:r,rowCount:t.length,height:c,width:i,style:{scrollBehavior:"smooth"},scrollToAlignment:"end",onRowsRendered:function(e){var t=e.stopIndex,n=l.a.get(p,"current[0].id");_.current=t===n},rowRenderer:function(e){var a=e.index,r=(e.key,e.style);return t[a]?o.a.createElement(n,Object.assign({message:t[a].message,index:a,style:r,key:t[a].id},u)):null}};return s(h.current),_.current&&(d.scrollToIndex=t.length-1),o.a.createElement(m.b,Object.assign({},d,{ref:h}))},p=n(39),d=n.n(p),f=function(e){var t=e.rowHeight,n=e.RenderComponent,r=e.socketKey,c=e.title,i=_(r).messageList,s=Object(a.useRef)();return o.a.createElement("div",{className:d.a.root},o.a.createElement("div",{className:d.a.header},o.a.createElement("div",{className:d.a.title},c),o.a.createElement("button",{onClick:function(){s.current.scrollToRow(i.length-1)}},"Jump to latest")),o.a.createElement("div",{className:d.a.list},o.a.createElement(m.a,null,function(e){var a=e.height,r=e.width;return o.a.createElement(h,{messageList:i,rowHeight:t,containerHeight:a,containerWidth:r,RenderComponent:n,photoWidth:r,getListRef:function(e){s.current=e}})})))},v=n(77),b=n(10),E=n.n(b),w=n(54),y=n.n(w),k=function(e){var t=e.member,n=t.member_name,o=t.photo;return a.createElement("div",{className:y.a.root},a.createElement("img",{src:o,className:y.a.photo,alt:"Avatar for ".concat(n)}),a.createElement("div",{className:y.a.name},n))},C=n(104),R=n.n(C),j=n(78),N=n.n(j),x=function(e){var t=e.comment,n=e.index;return a.createElement("div",{className:n%2===0?N.a.bubbleLeft:N.a.bubbleRight},a.createElement(R.a,{clamp:"auto"},t))},L=n(23),O=n.n(L),S=function(e){var t,n=e.message,o=e.index,r=e.style,c=l.a.get(n,"group.city"),m=l.a.get(n,"event.event_name");return a.createElement("div",{className:O.a.root,style:r},a.createElement("div",{className:O.a.title},a.createElement("div",{className:O.a.eventName},"".concat(m,", ")),a.createElement("div",{className:O.a.eventLocation},c),a.createElement("div",{className:O.a.dateTime},new Date(n.mtime).toLocaleString())),a.createElement("div",{className:E()((t={},Object(v.a)(t,O.a.commentLeft,o%2===0),Object(v.a)(t,O.a.commentRight,o%2!==0),t))},a.createElement(k,{member:n.member}),a.createElement(x,{comment:n.comment,index:o})))},A=n(40),F=n.n(A),H=function(e){var t=e.message,n=(e.photoWidth,e.style);return a.createElement("div",{style:n,className:F.a.root},a.createElement("div",{className:F.a.header},l.a.get(t,"photo_album.event.name")),a.createElement("img",{className:F.a.photo,src:t.photo_link,alt:l.a.get(t,"photo_album.event.name")}),a.createElement("div",{className:F.a.footer},a.createElement("span",null,new Date(t.mtime).toLocaleString()),a.createElement("span",null,"by ",l.a.get(t,"member.name"))))},W=n(55),M=n(27),B=["#09BC8A","#92AA83","#79B473","#86BAA1","#A0E8AF"],P=function(e){var t=[];return e.venue?t.push(e.venue.lon,e.venue.lat):t.push(e.group.group_lon,e.group.group_lat),t},J=function(e){var t=e.height,n=e.width,a=e.x,r=e.y,c=e.messageList;return o.a.createElement(M.ComposableMap,{height:t,width:n,projection:"miller"},o.a.createElement(M.ZoomableGroup,{zoom:6,center:[a,r]},o.a.createElement(M.Geographies,{geography:"".concat("/rsvp","/world-50m.json")},function(e,t){return e.map(function(e,n){var a={fill:B[l.a.random(0,B.length-1)],stroke:"#FFF",strokeWidth:.5,outline:"none"};return o.a.createElement(M.Geography,{key:"geography-".concat(n),cacheId:"geography-".concat(n),geography:e,projection:t,style:{default:a,hover:a,pressed:a}})})}),o.a.createElement(M.Markers,null,c.map(function(e){var t=e.message,n=e.id,a=P(t);return o.a.createElement(M.Marker,{key:n,marker:{coordinates:a}},o.a.createElement("defs",null,o.a.createElement("clipPath",{id:"circleView"},o.a.createElement("circle",{cx:"40",cy:"20",r:"20",fill:"#FFFFFF"}))),o.a.createElement("g",null,o.a.createElement("circle",{cx:"40",cy:"20",r:"25",fill:"yes"===t.response?"green":"red"}),o.a.createElement("image",{clipPath:"url(#circleView)",xlinkHref:l.a.get(t,"member.photo"),width:80,height:80,style:{background:"white"}})))}))))},T=n(56),I=n.n(T),K=[-87,41],z=function(){var e=_("rsvp",25).messageList,t=Object(a.useState)(K),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),u=Object(i.a)(s,2),g=u[0],h=u[1],p=Object(a.useRef)(!1);return Object(a.useEffect)(function(){var t=l.a.takeRight(e)[0];t&&g&&(p.current?(c(P(t.message)),p.current=!1):p.current=!0)},[e]),o.a.createElement("div",{className:I.a.mapContainer},o.a.createElement("div",{className:I.a.title},"RSVP",o.a.createElement("div",{className:I.a.toggle},o.a.createElement("input",{type:"checkbox",value:g,onChange:function(){return h(function(e){return!e})}}),"Snap to latest")),o.a.createElement(m.a,null,function(t){var n=t.height,a=t.width;return o.a.createElement(W.Motion,{defaultStyle:{x:r[0],y:r[1]},style:{x:Object(W.spring)(r[0],{stiffness:210,damping:20}),y:Object(W.spring)(r[1],{stiffness:210,damping:20})}},function(t){var r=t.x,c=t.y;return o.a.createElement(J,{x:r,y:c,height:n,width:a,messageList:e})})}))},G=n(79),U=n.n(G);window.__sockets__={comments:new WebSocket("wss://stream.meetup.com/2/event_comments"),rsvp:new WebSocket("wss://stream.meetup.com/2/rsvps"),photos:new WebSocket("wss://stream.meetup.com/2/photos")};var D=function(){return a.createElement("div",{className:U.a.root},a.createElement("div",{className:U.a.columns},a.createElement(f,{title:"Comments",rowHeight:170,socketKey:"comments",RenderComponent:S}),a.createElement(z,null),a.createElement(f,{title:"Photos",rowHeight:545,socketKey:"photos",RenderComponent:H})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},23:function(e,t,n){e.exports={root:"Comment_root__hJkHq",commentLeft:"Comment_commentLeft__1vfNL",commentRight:"Comment_commentRight__3aS2w",title:"Comment_title__8MJma",eventName:"Comment_eventName__C807I",eventLocation:"Comment_eventLocation__1oj1p",dateTime:"Comment_dateTime__3RxBa"}},39:function(e,t,n){e.exports={root:"StreamingColumn_root__1cKUD",title:"StreamingColumn_title__2PfBC",header:"StreamingColumn_header__v67T8",list:"StreamingColumn_list__1Gbp5",buttonContainer:"StreamingColumn_buttonContainer__e-5Oy",button:"StreamingColumn_button__1ef8m"}},40:function(e,t,n){e.exports={root:"Photo_root__1jl3m",photo:"Photo_photo__1oxXc",header:"Photo_header__2zE1F",footer:"Photo_footer__1lM7d"}},54:function(e,t,n){e.exports={root:"Member_root__LFcju",photo:"Member_photo__1ipAh",name:"Member_name__1xArU"}},56:function(e,t,n){e.exports={mapContainer:"RsvpStream_mapContainer__UfPX2",mapLabel:"RsvpStream_mapLabel__3F2UQ",title:"RsvpStream_title__2jnKi",toggle:"RsvpStream_toggle__1CkCx"}},78:function(e,t,n){e.exports={bubbleLeft:"Bubble_bubbleLeft__2wWZI",bubbleRight:"Bubble_bubbleRight__3yszd"}},79:function(e,t,n){e.exports={root:"App_root__1M4S6",title:"App_title__1M0hr",columns:"App_columns__fhulz"}}},[[106,1,2]]]);
//# sourceMappingURL=main.23077b82.chunk.js.map